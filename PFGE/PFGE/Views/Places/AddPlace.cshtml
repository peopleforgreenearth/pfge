@{
    ViewBag.Title = "AddPlace";
    Layout = "~/Views/_MainPage.cshtml";
}


@section headcontent {
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false"
    type="text/javascript"></script>
}

<script>
    var myCenter = new google.maps.LatLng(51.508742, -0.120850);
    var marker;
    var map = null;
    var geocoder = null;

    function initialize() {
        geocoder = new google.maps.Geocoder();

        var mapProp = {
            center: myCenter,
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
        marker = new google.maps.Marker({
            position: myCenter,
            draggable: true
            // icon:'themes/assets/images/nepali-momo.png',
            //animation: google.maps.Animation.BOUNCE
        });

        marker.setMap(map);

        //// Info open
        //var infowindow = new google.maps.InfoWindow({
        //    content: "Hello World!"
        //});

        //google.maps.event.addListener(marker, 'click', function () {
        //    //infowindow.open(map, marker);
        //});
    }
    google.maps.event.addDomListener(window, 'load', initialize);

    function showAddr() {
        alert("show addr called");
        showAddress(document.getElementById("AddressTextBox").value)
    }

    function showAddress(address) {
        alert("addr calling");


        geocoder.geocode({ 'address': address }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                alert("ok");
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });


            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });






        //if (geocoder) {
        //    geocoder.getLatLng(
        //      address,
        //      function (point) {
        //          if (!point) {
        //              alert(address + " not found");
        //          } else {
        //              //map.clearOverlays();
        //              //map.setCenter(point, 13);
        //              //var marker = new GMarker(point, { draggable: true });

        //              marker = new google.maps.Marker({
        //                  position: myCenter,
        //                  draggable: true
        //                  // icon:'themes/assets/images/nepali-momo.png',
        //                  //animation: google.maps.Animation.BOUNCE
        //              });


        //              marker.setMap(map);
        //              ////map.addOverlay(marker);
        //              //GEvent.addListener(marker, "dragstart", function () {

        //              //    map.closeInfoWindow();
        //              //});

        //              google.maps.event.addListener(marker, 'click', function () {
        //                  map.setZoom(8);
        //                  map.setCenter(marker.getPosition());
        //              });


        //              google.maps.event.addListener(marker, "dragend", function (point, placemark) {
        //                  //var point1=GMarker.getLatLng()

        //                  document.getElementById("LatitudeTextBox").value = point.y;
        //                  document.getElementById("LongitudeTextBox").value = point.x;


        //                  marker.openInfoWindowHtml("<br>Long: " + point.x + "<br>Lati:  " + point.y);
        //                  // marker.openInfoWindowHtml(address );
        //              });
        //              //map.addOverlay(marker);

        //              document.getElementById("LatitudeTextBox").value = point.y;
        //              document.getElementById("LongitudeTextBox").value = point.x;
        //              marker.openInfoWindowHtml(address + "<br>Long: " + point.x + "<br>Lati:  " + point.y);
        //          }
        //      }
        //    );


        //}
        alert("addr called");
    }


			</script>
			<div id="googleMap" style="height:450px;"></div>

<p>Heading:<input id="txtHeading" maxlength="60" /></p>

<p>
    City:<input id="City" type="text" />
</p>

<p>
    Address:<input id="AddressTextBox" maxlength="120" type="text" />

    <input type="button" id="Button1" onclick="showAddr(); return false"
        value="Search" />
</p>
<p>
    <div id="map_canvas" style="width: 500px; height: 300px">
    </div>
</p>

<p>
    Latitude:<input id="LatitudeTextBox" type="text" />
</p>

<p>
    Longitude:<input id="LongitudeTextBox" type="text" />
</p>

<input id="cmdSubmit" type="button" value="Submit" />
&nbsp;
  <input id="cmdCancel" value="Cancel" type="button" />

<br />
